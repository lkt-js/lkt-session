(function(s,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("lkt-date-tools"),require("lkt-string-tools")):typeof define=="function"&&define.amd?define(["exports","lkt-date-tools","lkt-string-tools"],n):(s=typeof globalThis<"u"?globalThis:s||self,n(s.LktSession={},s.lktDateTools,s.lktStringTools))})(this,function(s,n,u){"use strict";class O{constructor(t){t||(t=!0),this.value=t}enabled(){return this.value}}class r{}r.SUPPORTS_LOCAL_STORAGE=!1,r.SUPPORTS_SESSION_STORAGE=!1,r.COOKIE_FALLBACK=new O;const A=()=>{let e=1;if(typeof localStorage=="object")try{localStorage.setItem("localStorage","1"),localStorage.removeItem("localStorage")}catch{e=-1}else e=-1;return e===1},b=()=>{let e=1;if(typeof sessionStorage=="object")try{sessionStorage.setItem("sessionStorage","1"),sessionStorage.removeItem("sessionStorage")}catch{e=-1}else e=-1;return e===1},L=e=>{r.SUPPORTS_LOCAL_STORAGE=A(),r.SUPPORTS_SESSION_STORAGE=b(),typeof e=="object"&&typeof e.cookiesFallback=="boolean"&&(r.COOKIE_FALLBACK=new O(e.cookiesFallback))},l=(e,t,o)=>{const i=new Date;o||(o=n.getOneYearInSeconds());const a=i.getTime()+n.secondsToMilliseconds(o);i.setTime(a);const c=`expires=${i.toUTCString()}`;document.cookie=`${e}=${t}, ${c}`},g=e=>{const t=`${e}=`,o=document.cookie.split(","),i=document.cookie.split("expires="),a=u.trim(i[1]);let c=new Date(a);if(a&&(c=new Date(a))&&c<new Date){S(e);return}for(let d=0;d<o.length;d++){const f=u.trim(o[d]);if(f.indexOf(t)==0)return f.substring(t.length,f.length)}return""},S=e=>{l(e,"",-1)},w=(e,t,o)=>{if(!r.SUPPORTS_SESSION_STORAGE){if(!r.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support sessionStorage and cookies fallback is disabled");return l(e,t,o)}const i={value:t,expires:null};!!o&&typeof o=="number"&&(i.expires=new Date(n.time()+n.secondsToMilliseconds(o)).toString()),sessionStorage.setItem(e,JSON.stringify(i))},_=e=>{if(!r.SUPPORTS_SESSION_STORAGE){if(!r.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support sessionStorage and cookies fallback is disabled");return g(e)}const t=JSON.parse(sessionStorage.getItem(e));if(!t)return;const o=typeof t.expires=="string"&&t.expires.length>0;let i;if(o&&(i=new Date(t.expires))&&i<new Date){p(e);return}return t.value},p=e=>{if(!r.SUPPORTS_SESSION_STORAGE){if(!r.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support sessionStorage and cookies fallback is disabled");return S(e)}return sessionStorage.removeItem(e)},C=(e,t,o)=>{if(!r.SUPPORTS_LOCAL_STORAGE){if(!r.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support localStorage and cookies fallback is disabled");return l(e,t,o)}const i={value:t,expires:null};!!o&&typeof o=="number"&&(i.expires=new Date(n.time()+n.secondsToMilliseconds(o)).toString()),localStorage.setItem(e,JSON.stringify(i))},E=e=>{if(!r.SUPPORTS_LOCAL_STORAGE){if(!r.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support localStorage and cookies fallback is disabled");return g(e)}const t=JSON.parse(localStorage.getItem(e));if(!t)return;const o=typeof t.expires=="string"&&t.expires.length>0;let i;if(o&&(i=new Date(t.expires))&&i<new Date){k(e);return}return t.value},k=e=>{if(!r.SUPPORTS_LOCAL_STORAGE){if(!r.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support localStorage and cookies fallback is disabled");return S(e)}return localStorage.removeItem(e)},m={install:(e,t)=>{L(t)}};s.configureLktSession=L,s.default=m,s.getCookie=g,s.getLocalStorage=E,s.getSessionStorage=_,s.removeCookie=S,s.removeLocalStorage=k,s.removeSessionStorage=p,s.setCookie=l,s.setLocalStorage=C,s.setSessionStorage=w,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
