(function(o,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("lkt-date-tools"),require("lkt-string-tools")):typeof define=="function"&&define.amd?define(["exports","lkt-date-tools","lkt-string-tools"],r):(o=typeof globalThis<"u"?globalThis:o||self,r(o.LktSession={},o.LktDateTools,o.LktStringTools))})(this,function(o,r,a){"use strict";var h=Object.defineProperty;var P=(o,r,a)=>r in o?h(o,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[r]=a;var S=(o,r,a)=>(P(o,typeof r!="symbol"?r+"":r,a),a);class L{constructor(t){S(this,"value");t||(t=!0),this.value=t}enabled(){return this.value}}class i{}S(i,"SUPPORTS_LOCAL_STORAGE",!1),S(i,"SUPPORTS_SESSION_STORAGE",!1),S(i,"COOKIE_FALLBACK",new L);const b=()=>{let e=1;if(typeof localStorage=="object")try{localStorage.setItem("localStorage","1"),localStorage.removeItem("localStorage")}catch{e=-1}else e=-1;return e===1},w=()=>{let e=1;if(typeof sessionStorage=="object")try{sessionStorage.setItem("sessionStorage","1"),sessionStorage.removeItem("sessionStorage")}catch{e=-1}else e=-1;return e===1},p=e=>{i.SUPPORTS_LOCAL_STORAGE=b(),i.SUPPORTS_SESSION_STORAGE=w(),typeof e=="object"&&typeof e.cookiesFallback=="boolean"&&(i.COOKIE_FALLBACK=new L(e.cookiesFallback))},c=(e,t,s)=>{const n=new Date;s||(s=r.getOneYearInSeconds());const l=n.getTime()+r.secondsToMilliseconds(s);n.setTime(l);const g=`expires=${n.toUTCString()}`;document.cookie=`${e}=${t}, ${g}`},f=e=>{const t=`${e}=`,s=document.cookie.split(","),n=document.cookie.split("expires="),l=a.trim(n[1]);let g=new Date(l);if(l&&(g=new Date(l))&&g<new Date){d(e);return}for(let u=0;u<s.length;u++){const O=a.trim(s[u]);if(O.indexOf(t)==0)return O.substring(t.length,O.length)}return""},d=e=>{c(e,"",-1)},_=(e,t,s)=>{if(!i.SUPPORTS_SESSION_STORAGE){if(!i.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support sessionStorage and cookies fallback is disabled");return c(e,t,s)}const n={value:t,expires:null};!!s&&typeof s=="number"&&(n.expires=new Date(r.time()+r.secondsToMilliseconds(s)).toString()),sessionStorage.setItem(e,JSON.stringify(n))},C=e=>{if(!i.SUPPORTS_SESSION_STORAGE){if(!i.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support sessionStorage and cookies fallback is disabled");return f(e)}const t=JSON.parse(sessionStorage.getItem(e));if(!t)return;const s=typeof t.expires=="string"&&t.expires.length>0;let n;if(s&&(n=new Date(t.expires))&&n<new Date){k(e);return}return t.value},k=e=>{if(!i.SUPPORTS_SESSION_STORAGE){if(!i.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support sessionStorage and cookies fallback is disabled");return d(e)}return sessionStorage.removeItem(e)},E=(e,t,s)=>{if(!i.SUPPORTS_LOCAL_STORAGE){if(!i.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support localStorage and cookies fallback is disabled");return c(e,t,s)}const n={value:t,expires:null};!!s&&typeof s=="number"&&(n.expires=new Date(r.time()+r.secondsToMilliseconds(s)).toString()),localStorage.setItem(e,JSON.stringify(n))},m=e=>{if(!i.SUPPORTS_LOCAL_STORAGE){if(!i.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support localStorage and cookies fallback is disabled");return f(e)}const t=JSON.parse(localStorage.getItem(e));if(!t)return;const s=typeof t.expires=="string"&&t.expires.length>0;let n;if(s&&(n=new Date(t.expires))&&n<new Date){A(e);return}return t.value},A=e=>{if(!i.SUPPORTS_LOCAL_STORAGE){if(!i.COOKIE_FALLBACK.enabled())throw new Error("Browser doesn't support localStorage and cookies fallback is disabled");return d(e)}return localStorage.removeItem(e)},T={install:(e,t)=>{p(t)}};o.configureLktSession=p,o.default=T,o.getCookie=f,o.getLocalStorage=m,o.getSessionStorage=C,o.removeCookie=d,o.removeLocalStorage=A,o.removeSessionStorage=k,o.setCookie=c,o.setLocalStorage=E,o.setSessionStorage=_,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
